<!-- AdditiveSplitting BPEL Process [Generated by the Eclipse BPEL Designer]  -->
<!-- Date: Mon Jun 17 04:09:47 PDT 2013 -->

<bpel:process name="AdditiveSplitting"
         targetNamespace="http://additivesplitting.bpelprocess"
         suppressJoinFailure="yes"  exitOnStandardFault="yes"
         xmlns:tns="http://additivesplitting.bpelprocess"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns="http://www.cloudservices.org/MatServ/"
         xmlns:ns1="http://www.brokerservices.org/MatServ/"
    	 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    	 xmlns:ode="http://www.apache.org/ode/type/extension">
         >
    <!-- Import the client WSDL -->
	<bpel:import location="AdditiveSplittingArtifacts.wsdl" namespace="http://additivesplitting.bpelprocess" 
	        importType="http://schemas.xmlsoap.org/wsdl/" />
	        
    <bpel:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="CloudServices.wsdl" namespace="http://www.cloudservices.org/MatServ/"/>
   
   <bpel:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="BrokerServices.wsdl" namespace="http://www.brokerservices.org/MatServ/"/>
   
    <!-- ================================================================= -->         
    <!-- PARTNERLINKS                                                      -->
    <!-- List of services participating in this BPEL process               -->
    <!-- ================================================================= -->         
    <bpel:partnerLinks>
        <!--
        The 'client' role represents the requester of this service. It is 
        used for callback. The location and correlation information associated
        with the client role are automatically set using WS-Addressing.
        -->
        <bpel:partnerLink name="client"
                     partnerLinkType="tns:AdditiveSplitting"
                     myRole="AdditiveSplittingProvider"
                     partnerRole="AdditiveSplittingRequester"
                     />
                     
        <bpel:partnerLink name="callback_PL"
                     partnerLinkType="tns:AdditiveSplitting"
                     myRole="AdditiveSplittingProvider"
                     
                     />
         <bpel:partnerLink name="OnCloud1_PL"
                     partnerLinkType="tns:Cloud_PL"
                     partnerRole="CloudServicesProvider"
                     />
          <bpel:partnerLink name="OnBroker_PL"
                     partnerLinkType="tns:Broker_PL"
                     partnerRole="BrokerServicesProvider"
                     />
        <bpel:partnerLink name="OnCloud2_PL" partnerLinkType="tns:Cloud_PL" partnerRole="CloudServicesProvider"></bpel:partnerLink>
        <bpel:partnerLink name="OnCloud3_PL" partnerLinkType="tns:Cloud_PL" partnerRole="CloudServicesProvider"></bpel:partnerLink>
        <bpel:partnerLink name="OnCloud4_PL" partnerLinkType="tns:Cloud_PL" partnerRole="CloudServicesProvider"></bpel:partnerLink>
    </bpel:partnerLinks>
    
  
    <!-- ================================================================= -->         
    <!-- VARIABLES                                                         -->
    <!-- List of messages and XML documents used within this BPEL process  -->
    <!-- ================================================================= -->         
    <bpel:variables>
        <!-- Reference to the message passed as input during initiation -->
        <bpel:variable name="input"
                  messageType="tns:AdditiveSplittingRequestMessage"/>
                  
        <!-- Reference to the message that will be sent back to the 
             requester during callback
             -->
        <bpel:variable name="output"
                  messageType="tns:AdditiveSplittingResponseMessage"/>
                  
         <bpel:variable messageType="ns:multiplyRequest" name="A1B1_PLRequest"/>
        <bpel:variable messageType="ns:multiplyRequest" name="A2B2_PLRequest"/>
        <bpel:variable messageType="ns:multiplyRequest" name="A1B2_PLRequest"/>
        <bpel:variable messageType="ns:multiplyRequest" name="A2B1_PLRequest"/>
        <bpel:variable messageType="ns1:addRequest" name="add_PLRequest"/>
        <bpel:variable messageType="ns1:resplitRequest" name="resplit_PLRequest"/>
        
        <bpel:variable name="JOB" type="xsd:string"/>
        
        <bpel:variable messageType="tns:callbackRequestMessage_1" name="callbackRequest_1"/>
        <bpel:variable messageType="tns:callbackRequestMessage_2" name="callbackRequest_2"/>
        <bpel:variable messageType="tns:callbackRequestMessage_3" name="callbackRequest_3"/>
		<bpel:variable messageType="tns:callbackRequestMessage_4" name="callbackRequest_4"/>
		<bpel:variable messageType="tns:callbackRequestMessage_5" name="callbackRequest_5"/>        
        <bpel:variable  messageType="tns:callbackRequestMessage_0" name="callbackRequest_0"/>
    </bpel:variables>

	 <bpel:correlationSets>
        <!--  <bpel:correlationSet name="JOB_CS" properties="tns:jobid_CS"/>-->
        <bpel:correlationSet name="SUB_JOB_CS" properties="tns:sub_jobid_CS"/>
        
        
        
        
        
        
     </bpel:correlationSets>
    
    <!-- ================================================================= -->         
    <!-- ORCHESTRATION LOGIC                                               -->
    <!-- Set of activities coordinating the flow of messages across the    -->
    <!-- services integrated within this business process                  -->
    <!-- ================================================================= -->         
    <bpel:sequence name="main">
        
        <!-- Receive input from requestor. 
             Note: This maps to operation defined in AdditiveSplitting.wsdl 
             -->
        
        
        <bpel:receive name="receiveInput" partnerLink="client"
                 portType="tns:AdditiveSplitting"
                 operation="initiate" variable="input"
                 createInstance="yes">
		 <bpel:correlations>
             <!--     <bpel:correlation initiate="yes" set="JOB_CS"/>-->
                <bpel:correlation initiate="yes" set="SUB_JOB_CS"/>
            </bpel:correlations>
        </bpel:receive>
       
        
        
        
        
        
        
        <!--  <bpel:assign name="Assign" validate="no">
            <bpel:copy>
                <bpel:from>
                    <bpel:literal>
                        <tns:AdditiveSplittingResponse xmlns:tns="http://additivesplitting.bpelprocess" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tns:jobID>tns:jobID</tns:jobID>
  <tns:sub_jobID>tns:sub_jobID</tns:sub_jobID>
  <tns:result>tns:result</tns:result>

                        </tns:AdditiveSplittingResponse>
                    </bpel:literal>
                </bpel:from><bpel:to variable="output" part="parameters"></bpel:to>
            
            
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[concat($input.parameters/tns:matA_ID, "_", $input.parameters/tns:matB_ID,"_",string($ode:pid))]]>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$output.parameters/tns:result]]>
                </bpel:to>
            </bpel:copy><bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="output">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:sub_jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="output">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:sub_jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        
        
        
        
        </bpel:assign>-->
        <!-- 
        <bpel:reply name="replyOutput" operation="initiate" partnerLink="client" portType="tns:AdditiveSplitting" variable="output">
            <bpel:correlations>
                <bpel:correlation set="SUB_JOB_CS" initiate="no"></bpel:correlation>
            </bpel:correlations>
        </bpel:reply>-->
        <bpel:assign validate="no" name="AssignResplit">
            <bpel:copy>
                <bpel:from><bpel:literal xml:space="preserve"><ws:resplit xmlns:ws="http://www.brokerservices.org/MatServ/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <op_id>0</op_id>
  <job_id>job_id</job_id>
  <matA_ID>matA_ID</matA_ID>
  <matB_ID>matB_ID</matB_ID>
  <callback>http://localhost:8080/ode/processes/AdditiveSplitting</callback>
</ws:resplit></bpel:literal></bpel:from>
                <bpel:to variable="resplit_PLRequest" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:sub_jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="resplit_PLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[job_id]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:matA_ID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="resplit_PLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matA_ID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:matB_ID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="resplit_PLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matB_ID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            
        </bpel:assign>
        <bpel:invoke name="InvokeResplit" partnerLink="OnBroker_PL" operation="resplit" portType="ns1:MatServ" inputVariable="resplit_PLRequest">
        </bpel:invoke>
        
        <bpel:receive name="Receive" partnerLink="callback_PL" operation="resplit_callBack" portType="tns:AdditiveSplitting" variable="callbackRequest_0">
            <bpel:correlations>
                <bpel:correlation set="SUB_JOB_CS" initiate="no"></bpel:correlation>
                 
            </bpel:correlations>
        </bpel:receive>
        
          
        <bpel:flow name="Flow">                                                        <bpel:scope name="Scope">
                <bpel:sequence name="A1B1"><bpel:assign name="Assign1" validate="no">
                    
                    <bpel:copy>
                        <bpel:from><bpel:literal xml:space="preserve"><ws:multiply xmlns:ws="http://www.cloudservices.org/MatServ/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <op_id>1</op_id>
  <job_id>job_id</job_id>
  <matA_ID>matA_ID</matA_ID>
  <matB_ID>matB_ID</matB_ID>
  <callback>http://localhost:8080/ode/processes/AdditiveSplitting</callback>
</ws:multiply></bpel:literal></bpel:from>
                        <bpel:to variable="A1B1_PLRequest" part="parameters"></bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$input.parameters/tns:sub_jobID]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A1B1_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                <![CDATA[job_id]]>
                            </bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[1]/tns:splitA_name/text()]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A1B1_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matA_ID]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[1]/tns:splitB_name/text()]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A1B1_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matB_ID]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[1]/tns:cloud_url/text()]]>
                        </bpel:from>
                        <bpel:to partnerLink="OnCloud1_PL"></bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            <![CDATA[string(1)]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A1B1_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[op_id]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                        
                        
                    </bpel:assign>       
                <bpel:invoke name="Mult_A1B1" operation="multiply" partnerLink="OnCloud1_PL" portType="ns:MatServ" inputVariable="A1B1_PLRequest">
                </bpel:invoke>
                <bpel:receive name="CB_A1_B1" operation="callBack_Operation1" partnerLink="client" portType="tns:AdditiveSplitting" variable="callbackRequest_1">
                    <bpel:correlations>
                        
                        <bpel:correlation set="SUB_JOB_CS" initiate="no"></bpel:correlation>
                    </bpel:correlations>
                </bpel:receive>
                
                
                
            
                </bpel:sequence>
            </bpel:scope><bpel:scope name="Scope1">
                
                <bpel:sequence name="A2B2"><bpel:assign name="Assign2" validate="no">
                        <bpel:copy><bpel:from><bpel:literal xml:space="preserve"><ws:multiply xmlns:ws="http://www.cloudservices.org/MatServ/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <op_id>2</op_id>
  <job_id>job_id</job_id>
  <matA_ID>matA_ID</matA_ID>
  <matB_ID>matB_ID</matB_ID>
  <callback>http://localhost:8080/ode/processes/AdditiveSplitting</callback>
</ws:multiply></bpel:literal></bpel:from>
                        <bpel:to variable="A2B2_PLRequest" part="parameters"></bpel:to>
                    
                        </bpel:copy><bpel:copy>
                        <bpel:from>
                            <![CDATA[$input.parameters/tns:sub_jobID]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A2B2_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                <![CDATA[job_id]]>
                            </bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[2]/tns:splitA_name/text()]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A2B2_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matA_ID]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[2]/tns:splitB_name/text()]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A2B2_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matB_ID]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[2]/tns:cloud_url/text()]]>
                        </bpel:from>
                        <bpel:to partnerLink="OnCloud2_PL"></bpel:to>
                    </bpel:copy>
                
                    <bpel:copy>
                        <bpel:from>
                            <![CDATA[string(2)]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A2B2_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[op_id]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                
                    </bpel:assign><bpel:invoke name="Mult_A2B2" partnerLink="OnCloud2_PL" operation="multiply" portType="ns:MatServ" inputVariable="A2B2_PLRequest">                
                </bpel:invoke>
                <bpel:receive name="CB_A2B2" operation="callBack_Operation2" partnerLink="callback_PL" portType="tns:AdditiveSplitting" variable="callbackRequest_2">
                    <bpel:correlations>
                        
                        <bpel:correlation set="SUB_JOB_CS" initiate="no"></bpel:correlation> 
                    </bpel:correlations>
                </bpel:receive>
                
                
                
            
                
                
                </bpel:sequence>
            </bpel:scope><bpel:scope name="Scope2">
                <bpel:sequence name="A1B2"><bpel:assign name="Assign3" validate="no">
                    
                    <bpel:copy>
                        <bpel:from><bpel:literal xml:space="preserve"><ws:multiply xmlns:ws="http://www.cloudservices.org/MatServ/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <op_id>3</op_id>
  <job_id>job_id</job_id>
  <matA_ID>matA_ID</matA_ID>
  <matB_ID>matB_ID</matB_ID>
  <callback>http://localhost:8080/ode/processes/AdditiveSplitting</callback>
</ws:multiply></bpel:literal></bpel:from>
                        <bpel:to variable="A1B2_PLRequest" part="parameters"></bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            <![CDATA[$input.parameters/tns:sub_jobID]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A1B2_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                <![CDATA[job_id]]>
                            </bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[3]/tns:splitA_name/text()]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A1B2_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matA_ID]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[3]/tns:splitB_name/text()]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A1B2_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matB_ID]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                   
                        <bpel:copy>
                            <bpel:from>
                                
                                
                                <![CDATA[$callbackRequest_0.parameters/tns:split[3]/tns:cloud_url/text()]]>
                            </bpel:from>
                            <bpel:to partnerLink="OnCloud3_PL"></bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[3]/tns:cloud_url/text()]]>
                        </bpel:from>
                        <bpel:to partnerLink="OnCloud3_PL"></bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            <![CDATA[string(3)]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A1B2_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[op_id]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                </bpel:assign>       
              <bpel:invoke name="Mult_A1B2" partnerLink="OnCloud3_PL" operation="multiply" portType="ns:MatServ" inputVariable="A1B2_PLRequest">
                </bpel:invoke>
                <bpel:receive name="CB_A1B2" operation="callBack_Operation3" partnerLink="callback_PL" portType="tns:AdditiveSplitting" variable="callbackRequest_3">
                    <bpel:correlations>
                        
                         <bpel:correlation set="SUB_JOB_CS" initiate="no"></bpel:correlation>
                    </bpel:correlations>
                </bpel:receive>
                
                
                
            
                </bpel:sequence>
                
            </bpel:scope><bpel:scope name="Scope3">
                <bpel:sequence name="A2B1"><bpel:assign name="Assign4" validate="no">
                    
                    <bpel:copy>
                        <bpel:from><bpel:literal xml:space="preserve"><ws:multiply xmlns:ws="http://www.cloudservices.org/MatServ/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <op_id>4</op_id>
  <job_id>job_id</job_id>
  <matA_ID>matA_ID</matA_ID>
  <matB_ID>matB_ID</matB_ID>
  <callback>http://localhost:8080/ode/processes/AdditiveSplitting</callback>
</ws:multiply></bpel:literal></bpel:from>
                        <bpel:to variable="A2B1_PLRequest" part="parameters"></bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            <![CDATA[$input.parameters/tns:sub_jobID]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A2B1_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                <![CDATA[job_id]]>
                            </bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[4]/tns:splitA_name/text()]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A2B1_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matA_ID]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[4]/tns:splitB_name/text()]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A2B1_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[matB_ID]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                    
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <![CDATA[$callbackRequest_0.parameters/tns:split[4]/tns:cloud_url/text()]]>
                        </bpel:from>
                        <bpel:to partnerLink="OnCloud4_PL"></bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>
                            
                            
                            <![CDATA[string(4)]]>
                        </bpel:from>
                        <bpel:to part="parameters" variable="A2B1_PLRequest">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[op_id]]></bpel:query>
                        </bpel:to>
                    </bpel:copy>
                </bpel:assign>       
              
                      <bpel:invoke name="Mult_A2B1" partnerLink="OnCloud4_PL" operation="multiply" portType="ns:MatServ" inputVariable="A2B1_PLRequest">
                </bpel:invoke>
                <bpel:receive name="CB_A2B1" operation="callBack_Operation4" partnerLink="callback_PL" portType="tns:AdditiveSplitting" variable="callbackRequest_4">
                    <bpel:correlations>
                        
                         <bpel:correlation set="SUB_JOB_CS" initiate="no"></bpel:correlation>
                    </bpel:correlations>
                </bpel:receive>
                
                
                
            
                </bpel:sequence>
                
            </bpel:scope></bpel:flow>
        
        
        <!--
        
        <bpel:assign validate="no" name="Assign1">
            <bpel:copy>
                <bpel:from><bpel:literal xml:space="preserve"><tns:callback_1 xmlns:tns="http://additivesplitting.bpelprocess" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:jobID>tns:jobID</tns:jobID>
  <tns:sub_jobID>tns:sub_jobID</tns:sub_jobID>
  <tns:op_ID>1</tns:op_ID>
  <tns:cloud_url>hdfs://localhost:54310</tns:cloud_url>
  <tns:split_name>A_10_10_1</tns:split_name>
</tns:callback_1>
</bpel:literal></bpel:from>
                <bpel:to variable="callbackRequest_1" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="callbackRequest_1">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    <![CDATA[$input.parameters/tns:sub_jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="callbackRequest_1">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:sub_jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from><bpel:literal xml:space="preserve"><tns:callback_2 xmlns:tns="http://additivesplitting.bpelprocess" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:jobID>tns:jobID</tns:jobID>
  <tns:sub_jobID>tns:sub_jobID</tns:sub_jobID>
  <tns:op_ID>1</tns:op_ID>
  <tns:cloud_url>hdfs://localhost:54310</tns:cloud_url>
  <tns:split_name>A_10_10_2</tns:split_name>
</tns:callback_2>
</bpel:literal></bpel:from>
                <bpel:to variable="callbackRequest_2" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="callbackRequest_2">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    <![CDATA[$input.parameters/tns:sub_jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="callbackRequest_2">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:sub_jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
             <bpel:copy>
                <bpel:from><bpel:literal xml:space="preserve"><tns:callback_3 xmlns:tns="http://additivesplitting.bpelprocess" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:jobID>tns:jobID</tns:jobID>
  <tns:sub_jobID>tns:sub_jobID</tns:sub_jobID>
  <tns:op_ID>3</tns:op_ID>
  <tns:cloud_url>hdfs://localhost:54310</tns:cloud_url>
  <tns:split_name>B_10_10_1</tns:split_name>
</tns:callback_3>
</bpel:literal></bpel:from>
                <bpel:to variable="callbackRequest_3" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="callbackRequest_3">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    <![CDATA[$input.parameters/tns:sub_jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="callbackRequest_3">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:sub_jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
             <bpel:copy>
                <bpel:from><bpel:literal xml:space="preserve"><tns:callback_4 xmlns:tns="http://additivesplitting.bpelprocess" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:jobID>tns:jobID</tns:jobID>
  <tns:sub_jobID>tns:sub_jobID</tns:sub_jobID>
  <tns:op_ID>4</tns:op_ID>
  <tns:cloud_url>hdfs://localhost:54310</tns:cloud_url>
  <tns:split_name>B_10_10_2</tns:split_name>
</tns:callback_4></bpel:literal></bpel:from>
                <bpel:to variable="callbackRequest_4" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="callbackRequest_4">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    <![CDATA[$input.parameters/tns:sub_jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="callbackRequest_4">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:sub_jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        -->
        <bpel:assign name="Assign5" validate="no">
            
            
            <bpel:copy>
                <bpel:from><bpel:literal><ws:add xmlns:ws="http://www.brokerservices.org/MatServ/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <op_id>5</op_id>
  <job_id>job_id</job_id>
  <add_list>
    <cloudURL>cloudURL</cloudURL>
    <splitName>splitName</splitName>
  </add_list>
  <add_list>
    <cloudURL>cloudURL</cloudURL>
    <splitName>splitName</splitName>
  </add_list>
  <add_list>
    <cloudURL>cloudURL</cloudURL>
    <splitName>splitName</splitName>
  </add_list>
  <add_list>
    <cloudURL>cloudURL</cloudURL>
    <splitName>splitName</splitName>
  </add_list>
  <matA_ID>matA_ID</matA_ID>
  <matB_ID>matB_ID</matB_ID>
  <callback>callback</callback>
</ws:add>
</bpel:literal></bpel:from>
                <bpel:to variable="add_PLRequest" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy keepSrcElementName="no">
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:matA_ID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="add_PLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[matA_ID]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$input.parameters/tns:matB_ID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="add_PLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[matB_ID]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    <![CDATA[$input.parameters/tns:sub_jobID]]>
                </bpel:from>
                <bpel:to part="parameters" variable="add_PLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[job_id]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
         
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_1">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:cloud_url]]></bpel:query>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$add_PLRequest.parameters/add_list[1]/cloudURL/text()]]>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_1">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:split_name]]></bpel:query>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$add_PLRequest.parameters/add_list[1]/splitName/text()]]>
                </bpel:to>
            </bpel:copy>
            
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_2">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:cloud_url]]></bpel:query>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$add_PLRequest.parameters/add_list[2]/cloudURL/text()]]>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_2">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:split_name]]></bpel:query>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$add_PLRequest.parameters/add_list[2]/splitName/text()]]>
                </bpel:to>
            </bpel:copy>
            
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_3">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:cloud_url]]></bpel:query>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$add_PLRequest.parameters/add_list[3]/cloudURL/text()]]>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_3">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:split_name]]></bpel:query>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$add_PLRequest.parameters/add_list[3]/splitName/text()]]>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_4">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:cloud_url]]></bpel:query>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$add_PLRequest.parameters/add_list[4]/cloudURL/text()]]>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_4">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:split_name]]></bpel:query>
                </bpel:from>
                <bpel:to>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <![CDATA[$add_PLRequest.parameters/add_list[4]/splitName/text()]]>
                </bpel:to>
            </bpel:copy>
            
            <bpel:copy>
                <bpel:from>
                    
                    
                    <![CDATA[string(5)]]>
                </bpel:from>
                <bpel:to part="parameters" variable="add_PLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[op_id]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
            
        </bpel:assign>
        <bpel:invoke name="Add"
            operation="add" partnerLink="OnBroker_PL" portType="ns1:MatServ" inputVariable="add_PLRequest">
        </bpel:invoke>
        <bpel:receive name="Receive2" operation="callBack_Operation5"
            partnerLink="callback_PL" portType="tns:AdditiveSplitting" variable="callbackRequest_5">
            <bpel:correlations>
                <bpel:correlation initiate="no" set="SUB_JOB_CS"/>
            </bpel:correlations>
        </bpel:receive>
 
      
        
        
        
        
        
        
        <bpel:assign validate="no" name="Assign">
            <bpel:copy>
                <bpel:from><bpel:literal><tns:AdditiveSplittingResponse xmlns:tns="http://additivesplitting.bpelprocess" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:jobID>tns:jobID</tns:jobID>
  <tns:sub_jobID>tns:sub_jobID</tns:sub_jobID>
  <tns:result>tns:result</tns:result>
</tns:AdditiveSplittingResponse>
</bpel:literal></bpel:from>
                <bpel:to variable="output" part="parameters"></bpel:to>
            </bpel:copy>
            
            <bpel:copy>
                <bpel:from part="parameters" variable="input">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:jobID]]></bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="output">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:jobID]]></bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="input">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:sub_jobID]]></bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="output">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[tns:sub_jobID]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="callbackRequest_5">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:split_name]]></bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="output">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:result]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        <bpel:invoke name="AdditiveSplitCallback" partnerLink="client" portType="tns:AdditiveSplittingCallback"  operation="onResult" 
                inputVariable="output"></bpel:invoke> 
         
              
        
    </bpel:sequence>
</bpel:process>

