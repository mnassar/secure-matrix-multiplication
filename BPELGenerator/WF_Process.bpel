<?xml version="1.0" encoding="UTF-8"?>
<process
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    name="WF_Process" targetNamespace="http://matrix.bpelprocess"
    xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:tns="http://matrix.bpelprocess" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <import importType="http://schemas.xmlsoap.org/wsdl/"
        location="WF_ProcessArtifacts.wsdl" namespace="http://matrix.bpelprocess"/>
    <import importType="http://schemas.xmlsoap.org/wsdl/"
        location="WF_ProcessArtifacts.wsdl" namespace="http://www.example.org/MatServ/"/>
    <partnerLinks>
        <partnerLink myRole="WF_ProcessProvider" name="client" partnerLinkType="tns:WF_Process"/>
        <partnerLink name="A1B1_PL" partnerLinkType="tns:Mahout_PL" partnerRole="ServiceProvider"/>
        <partnerLink name="A2B2_PL" partnerLinkType="tns:Mahout_PL" partnerRole="ServiceProvider"/>
        <partnerLink name="A1B2_PL" partnerLinkType="tns:Mahout_PL" partnerRole="ServiceProvider"/>
        <partnerLink name="A2B1_PL" partnerLinkType="tns:Mahout_PL" partnerRole="ServiceProvider"/>
        <partnerLink name="Add_PL" partnerLinkType="tns:Mahout_PL" partnerRole="ServiceProvider"/>
        <partnerLink myRole="WF_ProcessProvider" name="mult1_PL" partnerLinkType="tns:WF_Process"/>
        <partnerLink myRole="WF_ProcessProvider" name="mult2_PL" partnerLinkType="tns:WF_Process"/>
        <partnerLink myRole="WF_ProcessProvider" name="mult3_PL" partnerLinkType="tns:WF_Process"/>
        <partnerLink myRole="WF_ProcessProvider" name="mult4_PL" partnerLinkType="tns:WF_Process"/>
        <partnerLink myRole="WF_ProcessProvider" name="add_PL" partnerLinkType="tns:WF_Process"/>
        <partnerLink myRole="WF_ProcessProvider" name="copy1_PL" partnerLinkType="tns:WF_Process"/>
    </partnerLinks>
    <variables>
        <variable messageType="tns:cpCallback1Request" name="copy1_PLRequest"/>
        <variable messageType="tns:cpCallback2Request" name="copy2_PLRequest"/>
        <variable messageType="tns:addResultRequest" name="add_PLRequest"/>
        <variable messageType="ns:computeRequest" name="A2B1_PLRequest"/>
        <variable messageType="ns:computeRequest" name="C1C2_PLRequest"/>
        <variable messageType="tns:multResult2Request" name="mult2_PLRequest"/>
        <variable name="JOB" type="xsd:int"/>
        <variable messageType="ns:computeRequest" name="A1B2_PLRequest"/>
        <variable messageType="tns:multResult3Request" name="mult3_PLRequest"/>
        <variable messageType="tns:multResult4Request" name="mult4_PLRequest"/>
        <variable messageType="tns:cpCallback4Request" name="copy4_PLRequest"/>
        <variable messageType="tns:multResult1Request" name="mult1_PLRequest"/>
        <variable messageType="tns:WF_ProcessRequestMessage" name="input"/>
        <variable messageType="ns:computeRequest" name="A1B1_PLRequest"/>
        <variable messageType="tns:cpCallback3Request" name="copy3_PLRequest"/>
        <variable messageType="ns:computeRequest" name="A2B2_PLRequest"/>
        <variable messageType="tns:WF_ProcessResponseMessage" name="output"/>
    </variables>
    <correlationSets>
        <correlationSet name="JOB_CS" properties="tns:jobid_CS"/>
    </correlationSets>
    <sequence>
        <receive createInstance="yes" name="ReceiveWithCorr"
            operation="initiate" partnerLink="client"
            portType="tns:WF_Process" variable="input">
            <correlations>
                <correlation direction="Receive" initiate="yes" set="JOB_CS"/>
            </correlations>
        </receive>
        <assign name="concatInputMsg">
            <copy>
                <from part="payload" variable="input">
                    <query>tns:input</query>
                </from>
                <to part="payload" variable="output">
                    <query>tns:payload</query>
                </to>
            </copy>
        </assign>
        <reply name="ReplyToClient" operation="initiate"
            partnerLink="client" portType="tns:WF_Process" variable="output"/>
    </sequence>
</process>
